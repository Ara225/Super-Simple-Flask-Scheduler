<!DOCTYPE html>
<head>
    <title>Flask Job Scheduler</title>
</head>

<body>
    <!-- Bootstrap CSS base styles-->
    <link rel="stylesheet" media="screen" href="static/bootstrap.min.css">
    <!-- A extra style because bootstrap doesn't have anything quite right for the interval fields -->
    <link rel="stylesheet" media="screen" href="static/extra-styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="navbar-nav">
            <a class="nav-item nav-link" href="/">Home</a>
            <a class="nav-item nav-link" href="/addjob">Schedule Job</a>
            <a class="nav-item nav-link" href="/getjobs">View Pending Jobs</a>
            <a class="nav-item nav-link" href="/getjobsresults">View Completed Jobs</a>
        </div>
    </nav>
    <div class="container-lg col-8">
        <!-- Alert area -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <br>
                {% for message in messages %}
                    {% if "Error" not in message[1]: %}
                        <div class="alert alert-info">
                            <strong>Success! </strong> {{ message[1] }}
                        </div>
                    {% endif %}
                    {% if "Error" in message[1]: %}
                        <div class="alert alert-warning">
                            {{ message[1] }}
                        </div>
                    {% endif %}
                {% endfor %}
            {% else %}
                <br>
            {% endif %}
        {% endwith %}
        <h2>Job Scheduler</h2>
        <br>
        <h4>Details</h4>
        <form action="" method="post" role="form">
            <!-- Field for name or ID of the new job  -->
            <div class="form-group">
                <input type="text" class="form-control" id="jobId" name="jobId" placeholder="Name for the New Job (required)">
            </div>
            <!-- Field for the command to run -->
            <div class="form-group">
                <input type="text" class="form-control" id="command" name="command" placeholder="Command to Run (required)">
            </div>
            <!-- Dropdown field to select type of job  -->
            <div class="form-group">
                <select class="form-control" id="typeSelector" name="typeSelector">
                    <option value="-- Select Job Type --" selected>-- Select Job Type --</option>
                    <option value="Python Job">Python Job</option>
                    <option value="Shell Job">Shell Job</option>
                </select>
            </div>
            <!-- Setup for one-off jobs, APScheduler trigger type for these is date -->
            <h4>Scheduling Options</h4>
            <div class="form-group">
                <h5>Run Once</h5>
                <input type="datetime-local" class="form-control" id="DateTimeField" name="DateTimeField">
            </div>
            <!-- Setup for repeating jobs, APScheduler trigger type for these is interval -->
            <div class="form-group">
                <h5>Repeat</h5>
                <input class="form-control intervalField" id="Seconds" name="Seconds" placeholder="Seconds" pattern='[0-5]{0,1}[0-9]{0,1}' title="Valid Seconds Amount">
                <input class="form-control intervalField" id="Minutes" name="Minutes" placeholder="Minutes" pattern='[0-5]{0,1}[0-9]{0,1}' title="Valid Minutes Amount">
                <input class="form-control intervalField" id="Hours" name="Hours" placeholder="Hours" pattern='[0-5]{0,1}[0-9]{0,1}' title="Valid Hours Amount">
                <input class="form-control intervalField" id="Days" name="Days" placeholder="Days" pattern='[0-9]*' title="Valid Days Amount">
                <input class="form-control intervalField" id="Weeks" name="Weeks" placeholder="Weeks" pattern='[0-9]*' title="Valid Weeks Amount">
            </div>
            <!-- Start Date - when scheduler should start -->
            <div class="form-group" style="display: inline-block;">
                Start Date (optional) &nbsp;
                <input type="datetime-local" class="form-control" id="startDateTimeField" name="startDateTimeField">
            </div>
            <!-- End Date - when scheduler should stop -->
            <div class="form-group" style="display: inline-block;">
                End Date (optional) &nbsp; &nbsp;
                <input type="datetime-local" class="form-control" id="endDateTimeField" name="endDateTimeField">
            </div>
            <!-- Submit button -->
            <div class="form-group">
                <button type="submit" class="btn btn-success">Submit</button>
                <br>
            </div>
        </form>
    </div>
</body>
</html>